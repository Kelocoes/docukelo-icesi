"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8688],{2931:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"computacion-2/semana-1/servidor-simple","title":"Construcci\xf3n de un servidor simple","description":"Gu\xeda paso a paso para construir un servidor web simple en Java","source":"@site/docs/computacion-2/semana-1/servidor-simple.md","sourceDirName":"computacion-2/semana-1","slug":"/computacion-2/semana-1/servidor-simple","permalink":"/docs/computacion-2/semana-1/servidor-simple","draft":false,"unlisted":false,"editUrl":"https://github.com/Kelocoes/docukelo-icesi/tree/main/docs/computacion-2/semana-1/servidor-simple.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Protocolos y servidores web","permalink":"/docs/computacion-2/semana-1/protocolos-servidores"},"next":{"title":"Construcci\xf3n de un servidor multihilos","permalink":"/docs/computacion-2/semana-1/servidor-multihilos"}}');var i=a(4848),o=a(8453);const s={sidebar_position:2},l="Construcci\xf3n de un servidor simple",c={},d=[{value:"Gu\xeda paso a paso para construir un servidor web simple en Java",id:"gu\xeda-paso-a-paso-para-construir-un-servidor-web-simple-en-java",level:2},{value:"1. Crear el archivo Java",id:"1-crear-el-archivo-java",level:3},{value:"2. Importar los paquetes necesarios",id:"2-importar-los-paquetes-necesarios",level:3},{value:"3. Definir la clase principal",id:"3-definir-la-clase-principal",level:3},{value:"4. Crear el socket del servidor",id:"4-crear-el-socket-del-servidor",level:3},{value:"5. Leer la solicitud del cliente",id:"5-leer-la-solicitud-del-cliente",level:3},{value:"6. Procesar la solicitud y obtener el nombre del archivo",id:"6-procesar-la-solicitud-y-obtener-el-nombre-del-archivo",level:3},{value:"7. Leer el archivo solicitado y preparar la respuesta",id:"7-leer-el-archivo-solicitado-y-preparar-la-respuesta",level:3},{value:"8. Compilar el servidor",id:"8-compilar-el-servidor",level:3},{value:"9. Ejecutar el servidor",id:"9-ejecutar-el-servidor",level:3},{value:"10. Probar el servidor desde el navegador",id:"10-probar-el-servidor-desde-el-navegador",level:3},{value:"11. Notas importantes",id:"11-notas-importantes",level:3}];function t(e){const r={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"construcci\xf3n-de-un-servidor-simple",children:"Construcci\xf3n de un servidor simple"})}),"\n",(0,i.jsx)(r.h2,{id:"gu\xeda-paso-a-paso-para-construir-un-servidor-web-simple-en-java",children:"Gu\xeda paso a paso para construir un servidor web simple en Java"}),"\n",(0,i.jsx)(r.h3,{id:"1-crear-el-archivo-java",children:"1. Crear el archivo Java"}),"\n",(0,i.jsxs)(r.p,{children:["Primero, crea un archivo llamado ",(0,i.jsx)(r.code,{children:"ServidorWebSimple.java"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"2-importar-los-paquetes-necesarios",children:"2. Importar los paquetes necesarios"}),"\n",(0,i.jsxs)(r.p,{children:["Agrega las siguientes l\xedneas al inicio del archivo para importar las clases requeridas.",(0,i.jsx)(r.br,{}),"\n","A continuaci\xf3n se explica brevemente para qu\xe9 se usan estas librer\xedas:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"java.io"}),": Proporciona clases para manejar entrada y salida, como leer archivos y flujos de datos."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"java.net"}),": Permite trabajar con redes, sockets y conexiones TCP/IP."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"java.util"}),": Incluye utilidades como colecciones y clases para manipular strings, por ejemplo, ",(0,i.jsx)(r.code,{children:"StringTokenizer"}),"."]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"import java.io.*;\nimport java.net.*;\nimport java.util.*;\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-definir-la-clase-principal",children:"3. Definir la clase principal"}),"\n",(0,i.jsxs)(r.p,{children:["Declare la clase principal y el m\xe9todo ",(0,i.jsx)(r.code,{children:"main"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"public class ServidorWebSimple {\n    public static void main(String argv[]) throws Exception {\n        // El c\xf3digo ir\xe1 ac\xe1\n    }\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"4-crear-el-socket-del-servidor",children:"4. Crear el socket del servidor"}),"\n",(0,i.jsxs)(r.p,{children:["Dentro del m\xe9todo ",(0,i.jsx)(r.code,{children:"main"}),", agregue el c\xf3digo para crear el socket que escuchar\xe1 en el puerto 6789:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"ServerSocket socketdeEscucha = new ServerSocket(6789);\nSocket socketdeConexion = socketdeEscucha.accept();\n"})}),"\n",(0,i.jsx)(r.h3,{id:"5-leer-la-solicitud-del-cliente",children:"5. Leer la solicitud del cliente"}),"\n",(0,i.jsx)(r.p,{children:"Agregue el siguiente c\xf3digo para leer la solicitud HTTP enviada por el navegador:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"BufferedReader mensajeDesdeCliente =\n    new BufferedReader(new InputStreamReader(socketdeConexion.getInputStream()));\nString lineaDeLaSolicitudHttp = mensajeDesdeCliente.readLine();\n"})}),"\n",(0,i.jsxs)(r.p,{children:["Nota: ",(0,i.jsx)(r.code,{children:"BufferedReader"})," utiliza un buffer interno para leer datos de manera eficiente desde el flujo de entrada, permitiendo procesar texto l\xednea por l\xednea."]}),"\n",(0,i.jsx)(r.h3,{id:"6-procesar-la-solicitud-y-obtener-el-nombre-del-archivo",children:"6. Procesar la solicitud y obtener el nombre del archivo"}),"\n",(0,i.jsxs)(r.p,{children:["Utilice ",(0,i.jsx)(r.code,{children:"StringTokenizer"})," para extraer el nombre del archivo solicitado:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'StringTokenizer lineaSeparada = new StringTokenizer(lineaDeLaSolicitudHttp);\nif (lineaSeparada.nextToken().equals("GET")) {\n    String nombreArchivo = lineaSeparada.nextToken();\n    if (nombreArchivo.startsWith("/"))\n        nombreArchivo = nombreArchivo.substring(1);\n    // El c\xf3digo para enviar el archivo ir\xe1 ac\xe1\n} else {\n    System.out.println("Bad Request Message");\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"7-leer-el-archivo-solicitado-y-preparar-la-respuesta",children:"7. Leer el archivo solicitado y preparar la respuesta"}),"\n",(0,i.jsx)(r.p,{children:"El siguiente c\xf3digo implementa el algoritmo que permite al servidor leer el archivo solicitado por el cliente y enviar una respuesta HTTP adecuada. Es importante entender c\xf3mo funciona este proceso:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Lectura del archivo"}),": Se utiliza ",(0,i.jsx)(r.code,{children:"FileInputStream"})," para leer el archivo solicitado y cargarlo en un arreglo de bytes."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Preparaci\xf3n de la respuesta HTTP"}),": Se construye la respuesta HTTP, incluyendo los encabezados necesarios como el tipo de contenido (",(0,i.jsx)(r.code,{children:"Content-Type"}),") y la longitud del archivo (",(0,i.jsx)(r.code,{children:"Content-Length"}),")."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Env\xedo de la respuesta"}),": Se env\xedan los encabezados y el contenido del archivo al cliente usando ",(0,i.jsx)(r.code,{children:"DataOutputStream"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["El uso de ",(0,i.jsx)(r.code,{children:"writeBytes"})," para los encabezados y el salto de l\xednea final ",(0,i.jsx)(r.code,{children:"\\r\\n"})," es relevante porque la especificaci\xf3n HTTP requiere que los encabezados terminen con una l\xednea vac\xeda antes de enviar el cuerpo del mensaje. Esto indica al navegador que los encabezados han terminado y que a continuaci\xf3n viene el contenido solicitado."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'File archivo = new File(nombreArchivo);\nFileInputStream archivoDeEntrada = new FileInputStream(nombreArchivo);\nint cantidadDeBytes = (int) archivo.length();\nbyte[] archivoEnBytes = new byte[cantidadDeBytes];\narchivoDeEntrada.read(archivoEnBytes);\n\nDataOutputStream mensajeParaCliente =\n    new DataOutputStream(socketdeConexion.getOutputStream());\n\n// Encabezado de respuesta HTTP\nmensajeParaCliente.writeBytes("HTTP/1.0 200 Document Follows\\r\\n");\nif (nombreArchivo.endsWith(".jpg"))\n    mensajeParaCliente.writeBytes("Content-Type: image/jpeg\\r\\n");\nif (nombreArchivo.endsWith(".gif"))\n    mensajeParaCliente.writeBytes("Content-Type: image/gif\\r\\n");\nmensajeParaCliente.writeBytes("Content-Length: " + cantidadDeBytes + "\\r\\n");\n\n// L\xednea vac\xeda para indicar el fin de los encabezados\nmensajeParaCliente.writeBytes("\\r\\n");\n\n// Env\xedo del contenido del archivo\nmensajeParaCliente.write(archivoEnBytes, 0, cantidadDeBytes);\n\nsocketdeConexion.close();\n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsxs)(r.strong,{children:["\xbfPor qu\xe9 es necesario el ",(0,i.jsx)(r.code,{children:"writeBytes"})," final y el ",(0,i.jsx)(r.code,{children:"\\r\\n"}),"?"]}),(0,i.jsx)(r.br,{}),"\n","El m\xe9todo ",(0,i.jsx)(r.code,{children:"writeBytes"})," se utiliza para enviar los encabezados HTTP como texto. El salto de l\xednea ",(0,i.jsx)(r.code,{children:"\\r\\n"})," al final de los encabezados es obligatorio seg\xfan el protocolo HTTP, ya que separa los encabezados del cuerpo del mensaje. Sin esta l\xednea vac\xeda, el navegador no podr\xe1 interpretar correctamente la respuesta y no mostrar\xe1 el contenido."]}),"\n",(0,i.jsx)(r.h3,{id:"8-compilar-el-servidor",children:"8. Compilar el servidor"}),"\n",(0,i.jsx)(r.p,{children:"Abra una terminal y compile el archivo:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"javac ServidorWebSimple.java\n"})}),"\n",(0,i.jsx)(r.h3,{id:"9-ejecutar-el-servidor",children:"9. Ejecutar el servidor"}),"\n",(0,i.jsx)(r.p,{children:"Ejecute el servidor con:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"java ServidorWebSimple\n"})}),"\n",(0,i.jsx)(r.h3,{id:"10-probar-el-servidor-desde-el-navegador",children:"10. Probar el servidor desde el navegador"}),"\n",(0,i.jsxs)(r.p,{children:["Coloque el archivo que desea servir (por ejemplo, ",(0,i.jsx)(r.code,{children:"miarchivo.html"}),") en el mismo directorio que el servidor. Abra su navegador y acceda a:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"http://127.0.0.1:6789/miarchivo.html\n"})}),"\n",(0,i.jsx)(r.h3,{id:"11-notas-importantes",children:"11. Notas importantes"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"El servidor solo atiende una solicitud por ejecuci\xf3n."}),"\n",(0,i.jsx)(r.li,{children:"Aseg\xfarese de que el archivo solicitado exista en el mismo directorio que el servidor."}),"\n",(0,i.jsxs)(r.li,{children:["Para servir im\xe1genes, el servidor a\xf1ade el encabezado ",(0,i.jsx)(r.code,{children:"Content-Type"})," adecuado."]}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453:(e,r,a)=>{a.d(r,{R:()=>s,x:()=>l});var n=a(6540);const i={},o=n.createContext(i);function s(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);